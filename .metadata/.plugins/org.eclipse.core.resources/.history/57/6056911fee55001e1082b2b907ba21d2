package com.spring.basic.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller // servlet-context에서 빈그래프를 보면 확인가능 뒤에 ("이름")으로 이름을 지정할수 있음
//빈이 이렇게 등록이 되어 있어야 Handlermapping이 이 클래스의 객체를 검색 할 수 있음

@RequestMapping("/request") // 컨트롤러 자체에 공통 URI를 제공해줌 <- 이걸 쓰면 맵핑할 때 앞의 /request 생략가능 

public class RequestController {
 // 1번 빈등록을 먼저해줌 ( @controller 라는 아노테이션을 붙여주면 자동으로 등록 됨 )
	
	public RequestController() {
		System.out.println("requestcon 생성됨 ! "); // 정상적으로 빈이 등록 됐는지 확인하기 위해
	}
	
	
	@RequestMapping("/request/test") // /request/test라는 요청이 들어오면 밑의 메서드를 호출시킴
	// 요청이 들어온다는게 무슨말이지?
	// http://localhost:8181/basic/request/test 가 웹페이지 주소에 요청된다면 이라는 뜻
	public String testCall() {
		System.out.println("/request/test 요청이 들어옴!");
		return "test2"; // "파일이름".jsp 파일을 실행시켜주는거임
	}
	
	
	//return으로 실행시키는 파일은 views 폴더안에 있는 jsp파일이 디폴트인데
	//다른 폴더에 있는 파일은 실행시킬수 없을까 ? 실행시키는 방법
	// 기본 디폴트가 views이기에 생략되니까 앞에 /폴더이름 <- 이렇게 붙여줘야함
//	@RequestMapping("/request/req")
	@RequestMapping("req") // 맨 위에 @RequestMapping("/request") 해놨기때문에 /request 생략 가능
	public String req() {
		System.out.println("/request/req 요청이 들어왔습니다!");
		return "/request/req-ex01";
	}
	
	
//	@RequestMapping(value="/request/basic01",method = RequestMethod.GET) 더 쉽게 쓰는 방법 ( 5버전부터 가능 )
	@GetMapping("request/basic01")
	public String basicget() {
		System.out.println("/basic01 요청이 들어옴 : GET 방식");
		return "/request/req-ex01";
	}
	
//	@RequestMapping(value="/request/basic01",method = RequestMethod.POST) 더 쉽게 쓰는 방법 ( 5버전부터 가능 )
	@PostMapping("/request/basic01")
	public String basicpost() {
		System.out.println("/basic01 요청이 들어옴 : POST 방식");
		return "/request/req-ex01";
	}
	
	//////////////////////////////////////////////////////////////////////////////
	
	@GetMapping("/join")
	public String register() {
		System.out.println("/request/join : GET");
		return "/request/join";
	}
}

